Capability specification is key problem for Web service discovery. Conventional one-step process based capability specification has its limitations. This paper proposes an approach for semantic behavior-based capability specification of Web service to stride over the limitations. Meta-level environment ontology is proposed to provide formal and sharable specifications of environment resources in a particular domain. For each environment resource, there is a corresponding hierarchical state machine specifying its dynamic characteristics. Then, effects on the environment resources are modelled with the hierarchical state machines. On the basis of the environment ontology, forest-structured communicating hierarchical state machines (FCHM) are defined and expected to be semantics of capability specification of Web services, which can be derived from the effects that Web services impose on their environments