Cloud storage systems have received extensive attention in recent years. Many individuals and business organizations are beginning to move their data to cloud environments. It becomes increasingly important to investigate secure file storage in cloud environments. In this paper, we present a secure distributed file distribution system in which the customers can directly choose appropriate design parameters and service providers. In our scheme, we use novel coding techniques that almost achieve the Shannon information bound with very efficient coding and decoding process. Our evaluations show the correctness and efficiency of the coding scheme. We show that the problem to find the satisfying file distribution under certain cost and security constraints is NP-hard, and present the Satisfiability Modulo Theories (SMT) formalization to find the satisfying data share distribution with cost and security constraints. The SMT formalization is flexible to be applied to other threshold based cloud file distribution system and can accommodate other constraints. We also analyse the security of the scheme by defining the security metric (compromising probability) for both the eavesdropping and DoS attackers and show that one must carefully choose design parameters to achieve the required security.