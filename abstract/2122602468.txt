We present SPIRIT, a Service for Providing Infrastructure Recommendations for Information Technology. SPIRIT allows maintenance support providers for Small-to-Medium Businesses (SMBs) to recommend solutions which are standardized (SMBs usually cannot afford customized IT solutions), flexible (accommodating as much as possible the customer's existing IT environment), and cost-effective (minimizing the cost of upgrading the customer's environment). SPIRIT works by first aligning the customer's IT infrastructure with a "template" describing the best practices recommended by the maintenance support provider. This step is done using an efficient graph algorithm that finds the most cost-effective transformations of the customer's environment that are consistent with the template. Then the aligned environment can be upgraded by choosing from a standard set of well understood, highly automated (and therefore economical) options. We show that the algorithm performs well on both real and synthetic data.