Internet of Things (IoT) interconnects billions of smart sensors, devices, actuators, as well as people, over a distributed environment to work together towards a better and smarter physical world. However, technologies are still under development to allow us to most effectively make use of the ubiquitous "smart things" to accomplish the desired goals in various human activities. Service discovery is one of these technologies that can help identify the desired IoT devices for the given task. In this paper, we design an efficient peer-to-peer (p2p) service discovery algorithm in an IoT network with a mix of static and mobile IoT nodes. Our algorithm is based on unstructured p2p routing with routing information caching (RIC). Due to the limited memory on IoT nodes, we bound the cache size to fit the IoT nodes and maximize the usefulness of their RIC content. First, we build an ontology of IoT device capabilities and design a hierarchical Bloom-filter based Indexing (HBFI) to index the capabilities in the ontology. HBFI is flexible in incorporating new capabilities and offers much more space efficient representation of the routing information. Also, the cache replacement scheme of RIC considers the reference time of the entries (as conventional), the mobility of the IoT nodes, and the inclusiveness of the capability concept. Experimental evaluations show that with the same memory size constraint, our scheme can provide more effective routing information and minimize the service discovery time compared to centralized, supernode based, DHT based, flooding based, and other information caching based solutions.